<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Кейсы Беки</title>
<style>
body {
  background: radial-gradient(circle, #3a005f, #12001f);
  color: white;
  font-family: Arial;
  margin: 0;
}
header {
  text-align: center;
  padding: 20px;
}
button {
  padding: 8px 12px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}
.case {
  background: #222;
  padding: 15px;
  border-radius: 15px;
  margin: 10px;
  display: inline-block;
}
#heroes {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px,1fr));
  gap: 10px;
  padding: 15px;
}
.card {
  padding: 10px;
  border-radius: 12px;
  text-align: center;
}
.common { background:#e67e22; }
.rare { background:#9b59b6; }
.legend { background:#f1c40f; color:black; }

.opening {
  animation: pop 0.6s ease;
}
@keyframes pop {
  0% { transform: scale(0.5); opacity:0; }
  100% { transform: scale(1); opacity:1; }
}
</style>
</head>
<body>

<header>
<h1>Бека депает — и ты депай!</h1>
<p>Баланс: <span id="money">2000</span> CC | Пыль: <span id="dust">0</span></p>
</header>

<div style="text-align:center">
  <div class="case"><b>Новичок</b><br><button onclick="openCase('starter',1)">Открыть</button></div>
  <div class="case"><b>Стандарт</b><br><button onclick="openCase('standard',1)">Открыть</button></div>
  <div class="case"><b>Дубай</b><br><button onclick="openCase('dubai',1)">Открыть</button></div>
  <div class="case"><b>Пыльный</b><br>
    <button onclick="openCase('dusty',1)">x1</button>
    <button onclick="openCase('dusty',10)">x10</button>
  </div>
</div>

<h2 style="text-align:center">Мои герои</h2>
<div id="heroes"></div>

<script>
let money = 2000;
let dust = 0;
let heroes = [];
let uid = 0;

const cases = {
  starter: [
    {name:"Книга", type:"common", sell:50, dust:5, chance:70},
    {name:"Кроссовок", type:"rare", sell:150, dust:15, chance:25},
    {name:"Шапка", type:"legend", sell:400, dust:40, chance:5}
  ],
  standard: [
    {name:"Шаурма", type:"common", sell:100, dust:10, chance:65},
    {name:"Кроссовок", type:"rare", sell:300, dust:30, chance:30},
    {name:"Остров", type:"legend", sell:780, dust:80, chance:5}
  ],
  dubai: [
    {name:"Квартира Бишкек", type:"rare", sell:600, dust:60, chance:85},
    {name:"Золотая медаль", type:"legend", sell:1100, dust:120, chance:15}
  ],
  dusty: [
    {name:"Пыль", type:"common", sell:0, dust:20, chance:90},
    {name:"Шапка", type:"rare", sell:300, dust:40, chance:9},
    {name:"Золотой клык", type:"legend", sell:1100, dust:150, chance:1}
  ]
};

function roll(items) {
  let r = Math.random()*100;
  let sum = 0;
  for (let i of items) {
    sum += i.chance;
    if (r <= sum) return {...i};
  }
}

function openCase(type, count) {
  for (let i=0;i<count;i++) {
    const item = roll(cases[type]);
    item.id = uid++;
    heroes.push(item);
    setTimeout(renderHeroes, 200);
  }
}

function renderHeroes() {
  const box = document.getElementById("heroes");
  box.innerHTML = "";
  heroes.forEach(h=>{
    const d = document.createElement("div");
    d.className = `card ${h.type} opening`;
    d.innerHTML = `
      <b>${h.name}</b><br>
      ${h.sell} CC<br>
      <button onclick="sell(${h.id})">Продать</button>
      <button onclick="dustItem(${h.id})">Распылить</button>
    `;
    box.appendChild(d);
  });
  document.getElementById("money").textContent = money;
  document.getElementById("dust").textContent = dust;
}

function sell(id){
  const i = heroes.findIndex(h=>h.id===id);
  money += heroes[i].sell;
  heroes.splice(i,1);
  renderHeroes();
}
function dustItem(id){
  const i = heroes.findIndex(h=>h.id===id);
  dust += heroes[i].dust;
  heroes.splice(i,1);
  renderHeroes();
}
</script>

</body>
</html>
